import{j as s,F as p,a as d,r,L as k}from"./index-f52f9868.js";import{h as x,e as w}from"./moment-694ea1d3.js";const E="_header_xh41z_1",m={header:E,"page-header":"_page-header_xh41z_5","project-tagline":"_project-tagline_xh41z_12","project-name":"_project-name_xh41z_33"};function L(){return s(p,{children:s("div",{className:m.header,children:d("header",{className:m["page-header"],role:"banner",children:[s("h1",{className:m["project-name"],children:"Welcome to GitHub Pages"}),s("h2",{className:m["project-tagline"],children:"“物理学不存了”"})]})})})}const M={};x.updateLocale("cn",{relativeTime:{future:"%s",past:"%s",s:"%d 秒前",ss:"%d 秒前",m:"%d 分钟前",mm:"%d 分钟前",h:"%d 个小时前",hh:"%d 个小时前",d:"%d 天前",dd:"%d 天前",M:"%d 个月前",MM:"%d 个月前",y:"%d 年前",yy:"%d 年前"}});function T(c){const{id:t,defaultValue:a,current:l,pageSize:n}=c,{userInfo:e,docs:i}=a;return r.useEffect(()=>{var g;t&&((g=document.querySelector(`#to-${t}`))==null||g.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}))},[t]),s(p,{children:s("div",{className:"m-6 mx-auto w-11/12 rounded-2xl bg-[aliceblue] p-6 lg:w-1/2",children:d(k,{id:`to-${i==null?void 0:i.id}`,to:`/docs/${i==null?void 0:i.id}?current=${l}&pageSize=${n}`,children:[d("div",{className:"flex w-full content-center items-center",children:[s("div",{className:"mr-4 h-16 w-16 rounded-full bg-black/[.05] p-2",children:s("img",{className:"h-auto w-full rounded-full",src:e==null?void 0:e.avatar,alt:""})}),d("div",{className:"flex-auto",children:[s("span",{children:e==null?void 0:e.username}),d("span",{className:"text-xs text-[#707070]",children:["·",x(i==null?void 0:i.createTime).fromNow()]})]})]}),s("div",{className:`${M.list} py-2 pl-20 text-sm`,children:i==null?void 0:i.title})]})})})}const C="_content_humv3_1",q="_pagination_humv3_1",z={content:C,pagination:q};class A{constructor(t){this.id=t.id||"",this.current=t.props.current||1,this.total=t.props.total||100,this.pageSize=t.props.pageSize||2,this.onchange=t.props.onChange||null,this.pageNumber=5,this.totalPage=Math.ceil(this.total/this.pageSize),this.init()}init(){this.handle(),this.total!==0&&this.loadPage()}handle(){this.container=document.querySelector("#"+this.id),this.container.onclick=t=>{var a=t||window.event,l=a.target||a.srcElement;l.getAttribute("data-page")&&l.getAttribute("class").indexOf("disabled")==-1&&(this.current=parseInt(l.getAttribute("data-page")),this.loadPage(),this.onchange({current:this.current,pageSize:this.pageSize}))}}callback_handle(){this.container.querySelector(".skip-input").addEventListener("keyup",t=>{var a=t||window.event,l=a.target||a.srcElement;if(t.keyCode===13){let n=parseInt(l.value);this.current=n>this.totalPage?this.totalPage:n,this.loadPage(),this.onchange({current:this.current,pageSize:this.pageSize})}})}loadPage(){this.container.innerHTML="";let t="",a=this.current>this.totalPage?this.totalPage:this.current;const l=a===1?"disabled":"",n=a===1?1:a-1;if(t+=`<span class="count">共 ${this.total} 条</span>`,t+=`<a href="javascript:;" class='${l}' data-page="1">首页</a>
        <a href="javascript:;" class='${l}' data-page=${n}>上一页</a>`,this.totalPage<=this.pageNumber)for(let e=1;e<=this.totalPage;e++)t+=`<a class='${e==a?"acive":""}' data-page=${e} >${e}</a>`;else if(a<this.pageNumber){for(let e=1;e<=this.pageNumber;e++)t+=`<a class='${e==a?"acive":""}' data-page=${e} > ${e} </a>`;t+='<a class="disabled">...</a>'}else if(t+='<a class="disabled">...</a>',a<this.totalPage-4){for(let e=a-2;e<=a+2;e++)t+=`<a class='${e==a?"acive":""}' data-page=${e} >${e}</a>`;t+='<a class="disabled">...</a>'}else if(this.totalPage-a<this.pageNumber)for(let e=a-(this.pageNumber-(this.totalPage-a)-1);e<=a+(this.totalPage-a);e++)t+=`<a class='${e==a?"acive":""}' data-page=${e} >${e}</a>`;t+=`<a href="javascript:;" class='${a===this.totalPage?"disabled":""}' data-page=${a==this.totalPage?this.totalPage:a+1} >下一页</a>
        <a href="javascript:;" class='${a===this.totalPage?"disabled":""}' data-page=${this.totalPage} >尾页</a>`,t+=`<span class="skip"> 到第<input type="text" min="1" value="${a}" class="skip-input">页</span>`,this.container.innerHTML=`<div class="js_Page">${t}</div>`,this.callback_handle()}}const f="id111";function H(c){return r.useEffect(()=>{new A({id:f,props:c})},[f,c]),s(p,{children:s("div",{id:f})})}function I(c){const{id:t,currents:a,pageSizes:l,data:n}=c;r.useRef(!1);const[e,i]=r.useState([]),[g,N]=r.useState(a||1),[$,_]=r.useState(l||5),[j,S]=r.useState(1);r.useState(!1),r.useState(!1),r.useEffect(()=>{var o,h;i(((o=n==null?void 0:n.data)==null?void 0:o.data)||[]),S(((h=n==null?void 0:n.data)==null?void 0:h.total)||0)},[n]),r.useEffect(()=>{v({current:g,pageSize:$})},[]);const v=({current:o,pageSize:h})=>{w({current:o,pageSize:h}).then(u=>{var P,b;i((P=u==null?void 0:u.data)==null?void 0:P.data),S((b=u==null?void 0:u.data)==null?void 0:b.total),scrollTo(0,0)})},y=({current:o,pageSize:h})=>{N(o),_(h),v({current:o,pageSize:h})};return s(p,{children:d("div",{className:`${z.content} pt-2`,children:[s("ul",{children:e==null?void 0:e.map((o,h)=>s("li",{children:s(T,{id:t,current:g,pageSize:$,defaultValue:o})},h))}),s("div",{className:z.pagination,children:s(H,{current:g,pageSize:5,total:j,onChange:y})})]})})}function R(){const c=localStorage.getItem("id"),t=localStorage.getItem("current")||1,a=localStorage.getItem("pageSize")||5;return d(p,{children:[s(L,{}),s(I,{id:c,currents:+t,pageSizes:+a})]})}export{R as default};
