import{_ as e,c as a,o,a5 as t}from"./chunks/framework.DALfHeHd.js";const u=JSON.parse('{"title":"概念","description":"","frontmatter":{"outline":"deep"},"headers":[],"relativePath":"前端/JavaScript/应用/浏览器跨域篇.md","filePath":"前端/JavaScript/应用/浏览器跨域篇.md","lastUpdated":1717045159000}'),r={name:"前端/JavaScript/应用/浏览器跨域篇.md"},s=t('<h1 id="概念" tabindex="-1">概念 <a class="header-anchor" href="#概念" aria-label="Permalink to &quot;概念&quot;">​</a></h1><p>跨域形成可以查看源解释；跨域访问可以看 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CORS" target="_blank" rel="noreferrer">跨源资源共享（CORS）</a></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type" target="_blank" rel="noreferrer">CORS 安全列表请求标头 Content-Type</a>。</p><p>推荐统一跨域最佳方案 CORS</p><h1 id="模拟场景" tabindex="-1">模拟场景 <a class="header-anchor" href="#模拟场景" aria-label="Permalink to &quot;模拟场景&quot;">​</a></h1><p>假设你已经掌握 nodejs 搭建项目；</p><p>流程：本地环境搭建 node 项目 A，和 node 项目 B，使用 axios，进行跨域调用；</p><h2 id="场景-1-不带任何凭证-cookie-进行通信" tabindex="-1">场景 1，不带任何凭证（cookie）进行通信 <a class="header-anchor" href="#场景-1-不带任何凭证-cookie-进行通信" aria-label="Permalink to &quot;场景 1，不带任何凭证（cookie）进行通信&quot;">​</a></h2><p>使用 res.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;*&#39;); 即可。</p><h2 id="场景-2-带凭证-cookie-进行通信" tabindex="-1">场景 2，带凭证（cookie）进行通信 <a class="header-anchor" href="#场景-2-带凭证-cookie-进行通信" aria-label="Permalink to &quot;场景 2，带凭证（cookie）进行通信&quot;">​</a></h2><p>使用 res.setHeader(&#39;Access-Control-Allow-Origin&#39;, &#39;http://localhost:3000&#39;); *不能使用，需要一一指定即可。</p><h2 id="场景-3-带凭证-cookie-进行通信-触发预检请求" tabindex="-1">场景 3，带凭证（cookie）进行通信，触发预检请求 <a class="header-anchor" href="#场景-3-带凭证-cookie-进行通信-触发预检请求" aria-label="Permalink to &quot;场景 3，带凭证（cookie）进行通信，触发预检请求&quot;">​</a></h2><ol><li>非安全列表请求标头 都会触发，服务器就要支持浏览器默认行为 options 的请求处理。</li></ol><p>记录： <a href="https://stackoverflow.com/questions/55295036/axios-onuploadprogress-and-ondownloadprogress-not-working-with-cors" target="_blank" rel="noreferrer">axios onUploadProgress 和 onDownloadProgress 不适用于 CORS，触发预检</a></p><p><a href="https://stackoverflow.com/questions/17057303/cors-request-is-preflighted-but-it-seems-like-it-should-not-be/17057853#17057853" target="_blank" rel="noreferrer">CORS 请求预检</a></p><h1 id="其他方案" tabindex="-1">其他方案 <a class="header-anchor" href="#其他方案" aria-label="Permalink to &quot;其他方案&quot;">​</a></h1><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>略</span></span></code></pre></div>',17),i=[s];function n(l,c,p,d,h,_){return o(),a("div",null,i)}const b=e(r,[["render",n]]);export{u as __pageData,b as default};
